{% extends "badger/base.html" %}

{% block pageid %}home{% endblock %}

{% block extrahead %}
    <link rel="alternate" type="application/atom+xml"
        title="{{ _('Recently awarded badges') }}"
        href="{{ url('badger.feeds.awards_recent', 'atom') }}" />
    <link rel="alternate" type="application/atom+xml"
        title="{{ _('Recently created badges') }}"
        href="{{ url('badger_multiplayer.feeds.badges_recent', 'atom') }}" />
{% endblock %}

{% block content %}
<section class="row-fluid">

    <section id="intro" class="span3">
        <header class="page-header">
        <h2><span>{{ _("Welcome to {title}!") | f(title=settings.SITE_TITLE) }}</span><small></small></h2>
        </header>
        <p>This is a service for <a href="http://decafbad.com/2010/07/badger-article/">making and awarding
            badges</a>. It's <a href="https://github.com/lmorchard/django-badger">Open Source</a>
            and woefully under-documented.</p>
        <div>
            <h3>Have a claim code?</h3>
            <p>Type it here and hit return to claim your award:</p>
            <form class="claim" method="GET" action="{{ url('badger.views.claim_deferred_award') }}">
              <input type="text" size="16" class="claim_code" 
                     name="code" id="intro_code" 
                     placeholder="enter claim code" 
                     value="{{ request.GET.get('code','') }}" />
            </form>
        </div>

        {% if badge_tags %}
        <div class="tags">
            <h3>Top tags:</h3>
            <ul class="tags top_tags">
                {% for item in badge_tags %}
                <li><a class="tag" href="{{ url('badger.badges_list', tag_name=item.tag.name) }}">{{ item.tag.name }} <span class="count">{{ item.count }}</span></a></li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

    </section>

    <section id="recent_badges" class="span4 item_flow">
        <header class="page-header">
            <h2>
                <span>{{ _("Recent badges") }}</span>
                <small>(
                    {% if badger_allows_add_by(request.user) %}
                        <a class="action" href="{{ url('badger_multiplayer.views.create') }}">{{ _("New") }}</a>,
                    {% endif %}
                    <a href="{{ url('badger.views.badges_list') }}">{{ _("More...") }}</a>
                    <a href="{{ url('badger_multiplayer.feeds.badges_recent', 'atom') }}"><img alt="{{ _("Atom feed") }}" src="{{MEDIA_URL}}/img/feed-icon-14x14.png" /></a>
                )</small>
            </h2>
        </header>
        {% set badge_list = badge_list[:12] %}
        {% include "badger/includes/badges_list.html" %}
    </section>

    <section id="recent_awards" class="span5 item_flow">
        <header class="page-header">
            <h2>
                <span>{{ _("Recent awards") }}</span>
                <small>(
                    <a href="{{ url('badger.views.awards_list') }}">{{ _("More...") }}</a>
                    <a href="{{ url('badger.feeds.awards_recent', 'atom') }}"><img alt="{{ _("Atom feed") }}" src="{{MEDIA_URL}}/img/feed-icon-14x14.png" /></a>
                )</small>
            </h2>
        </header>
        {% set award_list = award_list[:10] %}
        {% include "badger/includes/awards_list.html" %}
    </section>

</section>
{% endblock %}
